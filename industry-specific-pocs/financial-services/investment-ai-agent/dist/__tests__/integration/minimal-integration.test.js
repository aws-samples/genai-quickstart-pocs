"use strict";
/**
 * Minimal Integration Test
 * Standalone test to verify integration testing framework works
 */
describe('Minimal Integration Test', () => {
    describe('Basic Test Framework', () => {
        it('should run basic assertions', () => {
            expect(1 + 1).toBe(2);
            expect('hello').toBe('hello');
            expect([1, 2, 3]).toHaveLength(3);
        });
        it('should handle async operations', async () => {
            const promise = new Promise(resolve => setTimeout(() => resolve('done'), 10));
            const result = await promise;
            expect(result).toBe('done');
        });
        it('should validate test environment', () => {
            expect(process.env.NODE_ENV).toBe('integration-test');
            expect(process.env.AWS_REGION).toBe('us-east-1');
            expect(process.env.JWT_SECRET).toBe('integration-test-jwt-secret');
        });
        it('should have access to global test utilities', () => {
            expect(global.testUtils).toBeDefined();
            expect(typeof global.testUtils.wait).toBe('function');
            expect(typeof global.testUtils.mockDate).toBe('function');
            expect(typeof global.testUtils.generateTestId).toBe('function');
        });
        it('should generate unique test IDs', () => {
            const id1 = global.testUtils.generateTestId();
            const id2 = global.testUtils.generateTestId();
            expect(typeof id1).toBe('string');
            expect(typeof id2).toBe('string');
            expect(id1).not.toBe(id2);
            expect(id1).toMatch(/^test-\d+-[a-z0-9]+$/);
        });
        it('should support async wait utility', async () => {
            const startTime = Date.now();
            await global.testUtils.wait(50);
            const endTime = Date.now();
            const elapsed = endTime - startTime;
            expect(elapsed).toBeGreaterThanOrEqual(40); // Allow some variance
            expect(elapsed).toBeLessThan(100);
        });
    });
    describe('Integration Test Capabilities', () => {
        it('should handle concurrent operations', async () => {
            const operations = Array(5).fill(null).map(async (_, index) => {
                await global.testUtils.wait(10);
                return `operation-${index}`;
            });
            const results = await Promise.all(operations);
            expect(results).toHaveLength(5);
            results.forEach((result, index) => {
                expect(result).toBe(`operation-${index}`);
            });
        });
        it('should validate Jest configuration', () => {
            // Verify Jest is running with correct configuration
            expect(jest).toBeDefined();
            expect(expect).toBeDefined();
            expect(describe).toBeDefined();
            expect(it).toBeDefined();
            expect(beforeAll).toBeDefined();
            expect(afterAll).toBeDefined();
        });
        it('should support custom matchers', () => {
            // Test the custom UUID matcher from setup
            const validUuid = '123e4567-e89b-12d3-a456-426614174000';
            const invalidUuid = 'not-a-uuid';
            expect(validUuid).toBeValidUUID();
            expect(invalidUuid).not.toBeValidUUID();
        });
        it('should support custom email matcher', () => {
            // Test the custom email matcher from setup
            const validEmail = 'test@example.com';
            const invalidEmail = 'not-an-email';
            expect(validEmail).toBeValidEmail();
            expect(invalidEmail).not.toBeValidEmail();
        });
    });
    describe('Performance Validation', () => {
        it('should complete operations within time limits', async () => {
            const startTime = Date.now();
            // Simulate some work
            for (let i = 0; i < 100; i++) {
                Math.random();
            }
            const endTime = Date.now();
            const duration = endTime - startTime;
            expect(duration).toBeLessThan(100); // Should complete quickly
        });
        it('should handle multiple async operations efficiently', async () => {
            const startTime = Date.now();
            const operations = Array(10).fill(null).map(async () => {
                await global.testUtils.wait(5);
                return Math.random();
            });
            const results = await Promise.all(operations);
            const endTime = Date.now();
            const duration = endTime - startTime;
            expect(results).toHaveLength(10);
            expect(duration).toBeLessThan(100); // Parallel execution should be fast
        });
    });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWluaW1hbC1pbnRlZ3JhdGlvbi50ZXN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL19fdGVzdHNfXy9pbnRlZ3JhdGlvbi9taW5pbWFsLWludGVncmF0aW9uLnRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRztBQUVILFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxHQUFHLEVBQUU7SUFDeEMsUUFBUSxDQUFDLHNCQUFzQixFQUFFLEdBQUcsRUFBRTtRQUNwQyxFQUFFLENBQUMsNkJBQTZCLEVBQUUsR0FBRyxFQUFFO1lBQ3JDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RCLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDOUIsTUFBTSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQyxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxnQ0FBZ0MsRUFBRSxLQUFLLElBQUksRUFBRTtZQUM5QyxNQUFNLE9BQU8sR0FBRyxJQUFJLE9BQU8sQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztZQUM5RSxNQUFNLE1BQU0sR0FBRyxNQUFNLE9BQU8sQ0FBQztZQUM3QixNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzlCLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLGtDQUFrQyxFQUFFLEdBQUcsRUFBRTtZQUMxQyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQyxJQUFJLENBQUMs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QyxHQUFHLEVBQUUsQ0FBQztZQUMzQixNQUFNLFFBQVEsR0FBRyxPQUFPLEdBQUcsU0FBUyxDQUFDO1lBRXJDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQyxZQUFZLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDakMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLG9DQUFvQztRQUMxRSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE1pbmltYWwgSW50ZWdyYXRpb24gVGVzdFxuICogU3RhbmRhbG9uZSB0ZXN0IHRvIHZlcmlmeSBpbnRlZ3JhdGlvbiB0ZXN0aW5nIGZyYW1ld29yayB3b3Jrc1xuICovXG5cbmRlc2NyaWJlKCdNaW5pbWFsIEludGVncmF0aW9uIFRlc3QnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdCYXNpYyBUZXN0IEZyYW1ld29yaycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJ1biBiYXNpYyBhc3NlcnRpb25zJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KDEgKyAxKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KCdoZWxsbycpLnRvQmUoJ2hlbGxvJyk7XG4gICAgICBleHBlY3QoWzEsIDIsIDNdKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBhc3luYyBvcGVyYXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dCgoKSA9PiByZXNvbHZlKCdkb25lJyksIDEwKSk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm9taXNlO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnZG9uZScpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSB0ZXN0IGVudmlyb25tZW50JywgKCkgPT4ge1xuICAgICAgZXhwZWN0KHByb2Nlc3MuZW52Lk5PREVfRU5WKS50b0JlKCdpbnRlZ3JhdGlvbi10ZXN0Jyk7XG4gICAgICBleHBlY3QocHJvY2Vzcy5lbnYuQVdTX1JFR0lPTikudG9CZSgndXMtZWFzdC0xJyk7XG4gICAgICBleHBlY3QocHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCkudG9CZSgnaW50ZWdyYXRpb24tdGVzdC1qd3Qtc2VjcmV0Jyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhdmUgYWNjZXNzIHRvIGdsb2JhbCB0ZXN0IHV0aWxpdGllcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChnbG9iYWwudGVzdFV0aWxzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBnbG9iYWwudGVzdFV0aWxzLndhaXQpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3QodHlwZW9mIGdsb2JhbC50ZXN0VXRpbHMubW9ja0RhdGUpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3QodHlwZW9mIGdsb2JhbC50ZXN0VXRpbHMuZ2VuZXJhdGVUZXN0SWQpLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGdlbmVyYXRlIHVuaXF1ZSB0ZXN0IElEcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGlkMSA9IGdsb2JhbC50ZXN0VXRpbHMuZ2VuZXJhdGVUZXN0SWQoKTtcbiAgICAgIGNvbnN0IGlkMiA9IGdsb2JhbC50ZXN0VXRpbHMuZ2VuZXJhdGVUZXN0SWQoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHR5cGVvZiBpZDEpLnRvQmUoJ3N0cmluZycpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBpZDIpLnRvQmUoJ3N0cmluZycpO1xuICAgICAgZXhwZWN0KGlkMSkubm90LnRvQmUoaWQyKTtcbiAgICAgIGV4cGVjdChpZDEpLnRvTWF0Y2goL150ZXN0LVxcZCstW2EtejAtOV0rJC8pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzdXBwb3J0IGFzeW5jIHdhaXQgdXRpbGl0eScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICBhd2FpdCBnbG9iYWwudGVzdFV0aWxzLndhaXQoNTApO1xuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVsYXBzZWQgPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgICAgZXhwZWN0KGVsYXBzZWQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoNDApOyAvLyBBbGxvdyBzb21lIHZhcmlhbmNlXG4gICAgICBleHBlY3QoZWxhcHNlZCkudG9CZUxlc3NUaGFuKDEwMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbnRlZ3JhdGlvbiBUZXN0IENhcGFiaWxpdGllcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IG9wZXJhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBvcGVyYXRpb25zID0gQXJyYXkoNSkuZmlsbChudWxsKS5tYXAoYXN5bmMgKF8sIGluZGV4KSA9PiB7XG4gICAgICAgIGF3YWl0IGdsb2JhbC50ZXN0VXRpbHMud2FpdCgxMCk7XG4gICAgICAgIHJldHVybiBgb3BlcmF0aW9uLSR7aW5kZXh9YDtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwob3BlcmF0aW9ucyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHRzKS50b0hhdmVMZW5ndGgoNSk7XG4gICAgICByZXN1bHRzLmZvckVhY2goKHJlc3VsdCwgaW5kZXgpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShgb3BlcmF0aW9uLSR7aW5kZXh9YCk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgSmVzdCBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgICAgLy8gVmVyaWZ5IEplc3QgaXMgcnVubmluZyB3aXRoIGNvcnJlY3QgY29uZmlndXJhdGlvblxuICAgICAgZXhwZWN0KGplc3QpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoZXhwZWN0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGRlc2NyaWJlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGl0KS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KGJlZm9yZUFsbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChhZnRlckFsbCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBjdXN0b20gbWF0Y2hlcnMnLCAoKSA9PiB7XG4gICAgICAvLyBUZXN0IHRoZSBjdXN0b20gVVVJRCBtYXRjaGVyIGZyb20gc2V0dXBcbiAgICAgIGNvbnN0IHZhbGlkVXVpZCA9ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnO1xuICAgICAgY29uc3QgaW52YWxpZFV1aWQgPSAnbm90LWEtdXVpZCc7XG4gICAgICBcbiAgICAgIGV4cGVjdCh2YWxpZFV1aWQpLnRvQmVWYWxpZFVVSUQoKTtcbiAgICAgIGV4cGVjdChpbnZhbGlkVXVpZCkubm90LnRvQmVWYWxpZFVVSUQoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgc3VwcG9ydCBjdXN0b20gZW1haWwgbWF0Y2hlcicsICgpID0+IHtcbiAgICAgIC8vIFRlc3QgdGhlIGN1c3RvbSBlbWFpbCBtYXRjaGVyIGZyb20gc2V0dXBcbiAgICAgIGNvbnN0IHZhbGlkRW1haWwgPSAndGVzdEBleGFtcGxlLmNvbSc7XG4gICAgICBjb25zdCBpbnZhbGlkRW1haWwgPSAnbm90LWFuLWVtYWlsJztcbiAgICAgIFxuICAgICAgZXhwZWN0KHZhbGlkRW1haWwpLnRvQmVWYWxpZEVtYWlsKCk7XG4gICAgICBleHBlY3QoaW52YWxpZEVtYWlsKS5ub3QudG9CZVZhbGlkRW1haWwoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BlcmZvcm1hbmNlIFZhbGlkYXRpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjb21wbGV0ZSBvcGVyYXRpb25zIHdpdGhpbiB0aW1lIGxpbWl0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIHNvbWUgd29ya1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDA7IGkrKykge1xuICAgICAgICBNYXRoLnJhbmRvbSgpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4oMTAwKTsgLy8gU2hvdWxkIGNvbXBsZXRlIHF1aWNrbHlcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgaGFuZGxlIG11bHRpcGxlIGFzeW5jIG9wZXJhdGlvbnMgZWZmaWNpZW50bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgXG4gICAgICBjb25zdCBvcGVyYXRpb25zID0gQXJyYXkoMTApLmZpbGwobnVsbCkubWFwKGFzeW5jICgpID0+IHtcbiAgICAgICAgYXdhaXQgZ2xvYmFsLnRlc3RVdGlscy53YWl0KDUpO1xuICAgICAgICByZXR1cm4gTWF0aC5yYW5kb20oKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwob3BlcmF0aW9ucyk7XG4gICAgICBcbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0cykudG9IYXZlTGVuZ3RoKDEwKTtcbiAgICAgIGV4cGVjdChkdXJhdGlvbikudG9CZUxlc3NUaGFuKDEwMCk7IC8vIFBhcmFsbGVsIGV4ZWN1dGlvbiBzaG91bGQgYmUgZmFzdFxuICAgIH0pO1xuICB9KTtcbn0pOyJdfQ==